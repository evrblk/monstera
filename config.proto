syntax = "proto3";

option go_package = "github.com/evrblk/monstera";

package com.evrblk.monstera;

message Metadata {
  string Key = 1;
  string Value = 2;
}

message Node {
  string address = 1;
  repeated Metadata metadata = 2;
}

message Application {
  string name = 1;
  string implementation = 2;
  repeated Shard shards = 3;
  int32 replication_factor = 4;
  repeated Metadata metadata = 5;
}

message Shard {
  string id = 1;
  bytes lower_bound = 2;
  bytes upper_bound = 3;
  string parent_id = 4;
  repeated Replica replicas = 5;
  repeated Metadata metadata = 6;
}

message Replica {
  string id = 1;
  string node_address = 2;
  repeated Metadata metadata = 3;
}

message ClusterConfig {
  repeated Application applications = 1;
  repeated Node nodes = 2;
  int64 updated_at = 3;
  repeated Metadata metadata = 4;
}
